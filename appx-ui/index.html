<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="theme-color" content="#000000" />
  <title>App-X: Design Your Own Apps</title>
  <script type="text/javascript" src="./import-maps/index.js"></script>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
</body>

<script type="module-shim">

  //console.log(PropTypes)
  //console.log(window.PropTypes)
  ////console.log(global.PropTypes)
  //console.log(self.PropTypes)
  //console.log(globalThis.PropTypes)
  //import React from 'react';
  //import ReactDOM from 'react-dom';
  //console.log(React)
  //console.log(ReactDOM)

  // register service worker
  let hasRegStep = false
  if (! ('serviceWorker' in navigator)) {

    document.getElementById('root').value = `
        This browser is not supported!
        Use a latest version of Chrome, Edge, Safari, or Firefox to view this site.
    `
  } else if (!navigator.serviceWorker.controller) {
    hasRegStep = true
    navigator.serviceWorker.register('./sw.js', {scope: '.'})
    .then((reg) => {
      // registration successful
      console.log('Service Worker: registration succeeded. Scope is ' + reg.scope)
      navigator.serviceWorker.ready.then(() => {
        console.log(navigator.serviceWorker)
      })
    }).catch((error) => {
      // registration failed
      console.log('Service Worker: registration failed with ' + error)
    })
  }

  // render function
  async function render() {

    Promise.all([

      import('react'),
      import('react-dom'),
      //import('@material-ui/core')

    ]).then(() => {

      //console.log(React)
      //console.log(ReactDOM)
      //console.log(MaterialUI)

      import('./App.js').then(module => {
        const App = module.default
        //console.log(Appx)
        ReactDOM.render(
            React.createElement(App, null),
            document.getElementById('root')
        )
      })
    })
  }

  // wait for service worker registration, or render immediately
  if (hasRegStep) {
    setTimeout(render, 1000)
  } else {
    //setTimeout(render, 1000)
    render()
  }

</script>
</html>

<!--
<script defer src="https://unpkg.com/es-module-shims/dist/es-module-shims.js"></script>
{
  "imports": {
    "appx/": "/",
    "react": "https://unpkg.com/react@17/umd/react.development.js",
    "react-dom": "https://unpkg.com/react-dom@17/umd/react-dom.development.js",
    "prop-types": "https://unpkg.com/prop-types@15/prop-types.js"
  }
}
-->
<!-- script defer src="https://unpkg.com/es-module-shims"></script -->
<!-- script type="importmap-shim">
  {
    "imports": {
      "appx/": "/",
      "react": "https://unpkg.com/react@17/umd/react.development.js",
      "react-dom": "https://unpkg.com/react-dom@17/umd/react-dom.development.js",
      "prop-types": "https://unpkg.com/prop-types@15/prop-types.js"
    }
  }
</script -->
