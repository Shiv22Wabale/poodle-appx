ui_component:
    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /index
      ui_component_type: html
      ui_component_spec:
          entry: /Router
          title: Design Your Own Apps with App-X

    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /Router
      ui_component_type: react/component
      ui_component_spec:
        not_found_view:
          _type: react/element
          name: app-x/page/layout/HeaderLayout.default
          props:
            header:
              _type: react/element
              name: app-x/page/header/Header_user.default
              props:
                  appName: appx
                  title: App-X
                  titleIcon:
                      _type: react/element
                      name: "@material-ui/icons.ViewQuiltRounded"
                  rootUrl: '/console'
                  baseUrl: '/console'
                  authUrl: '/login'
                  authDeployment:
                      namespace: sys
                      ui_name: console
                      ui_deployment: base
          children:
            - _type: react/element
              name: app-x/view/error/NotFoundView.default
        routes:
          _type: appx/route
          name: /
        styles:
          _type: mui/style
          root:
            height: 100%
        element:
          _type: react/element
          name: react-redux.Provider
          props:
            store:
              _type: js/import
              name: app-x/redux/store.default
          children:
            - _type: react/element
              name: app-x/theme/GlobalStyleProvider.default
              props:
                theme:
                  _type: js/import
                  name: app-x/theme.default
              children:
                - _type: js/expression
                  data: routes || not_found_view

    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /page/header/Header_user
      ui_component_type: react/component
      ui_component_spec:
          propTypes:
              suffix: PropTypes.element
          element:
              _type: react/element
              name: app-x/page/header/Header_user
              props:
                  title: UI Builder
                  titleIcon:
                      _type: react/element
                      name: "@material-ui/icons.ViewQuiltRounded"
                  rootUrl: '/console'
                  baseUrl: '/'
                  authUrl: '/login'
                  authDeployment:
                      namespace: sys
                      ui_name: console
                      ui_deployment: base
                  suffix:
                      _type: js/expression
                      data: props.suffix
          _test:
            providers:
              - _type: react/element
                name: react-redux.Provider
                props:
                  store:
                    _type: js/import
                    name: app-x/redux/store.default
              - _type: react/element
                name: "app-x/theme/GlobalStyleProvider.default"
                props:
                  theme:
                    _type: js/import
                    name: app-x/theme.default

    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /page/Console
      ui_component_type: react/component
      ui_component_spec:
          states:
              ...navOpen:
                  _type: react/state
                  name: navOpen
                  setter: setNavOpen
                  init: "false"
          handlers:
              sideNavHandler:
                  _type: js/function
                  body:
                    - |
                      states.setNavOpen(!states.navOpen)
          element:
              _type: react/element
              name: app-x/page/layout/HeaderLayout
              props:
                  header:
                      _type: react/element
                      name: self/page/header/Header_user
                      props:
                          suffix:
                              _type: react/element
                              name: '@material-ui/core.Hidden'
                              props:
                                  lgUp: true
                              children:
                                  - _type: react/element
                                    name: '@material-ui/core.IconButton'
                                    props:
                                        color: inherit
                                        onClick:
                                            _type: js/expression
                                            data: handlers.sideNavHandler
                                    children:
                                        - _type: react/element
                                          name: '@material-ui/icons.Menu'
              children:
                  - _type: react/element
                    name: self/page/Builder
                    props:
                        isMobileNavOpen:
                            _type: js/expression
                            data: states.navOpen
                        handlers:
                            sideNavHandler:
                                _type: js/expression
                                data: handlers.sideNavHandler
          _test:
            providers:
              - _type: react/element
                name: react-redux.Provider
                props:
                  store:
                    _type: js/import
                    name: app-x/redux/store.default
              - _type: react/element
                name: "app-x/theme/GlobalStyleProvider.default"
                props:
                  theme:
                    _type: js/import
                    name: app-x/theme.default

    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /page/Builder
      ui_component_type: react/component
      ui_component_spec:
          states:
              builder:
                  _type: react/state
                  name: data
                  setter: setData
                  init: "{ui_builder_type: 'ui_component', ui_component_name: '/nav/uiNav', ui_route_name: '' }"
          handlers:
              handleComponentSelected:
                  _type: js/function
                  params:
                      - event
                  body:
                    - |
                      states.builder.setData({
                          ui_builder_type: 'ui_component',
                          ui_component_name: event.ui_component_name,
                          ui_route_name: '',
                      })
                      // console.log(event)
                      // console.log(states.builder.data)
              handleRouteSelected:
                  _type: js/function
                  params:
                      - event
                  body:
                    - |
                      states.builder.setData({
                          ui_builder_type: 'ui_route',
                          ui_component_name: '',
                          ui_route_name: event.ui_route_name,
                      })
          element:
              _type: react/element
              name: app-x/builder/ui/NavProvider
              children:
                - _type: react/element
                  name: 'app-x/page/layout/SideNavLayout'
                  props:
                      isMobileNavOpen:
                          _type: js/expression
                          data: props.isMobileNavOpen
                      onMobileClose:
                          _type: js/expression
                          data: props.handlers.sideNavHandler
                      sideNav:
                          _type: react/element
                          name: '@material-ui/core.Box'
                          props:
                              height: 100%
                              display: flex
                              flexDirection: column
                          children:
                              - _type: react/element
                                name: 'self/nav/uiNav'
                                props:
                                    handlers:
                                        handleComponentSelected:
                                            _type: js/expression
                                            data: handlers.handleComponentSelected
                                        handleRouteSelected:
                                            _type: js/expression
                                            data: handlers.handleRouteSelected
                  children:
                      - _type: react/element
                        name: app-x/builder/ui/UI_Builder
                        props:
                            namespace: sys
                            ui_name: ui
                            ui_deployment: base
                            ui_builder_type:
                                _type: js/expression
                                data: states.builder.data.ui_builder_type
                            ui_component_name:
                                _type: js/expression
                                data: states.builder.data.ui_component_name
                            ui_route_name:
                                _type: js/expression
                                data: states.builder.data.ui_route_name
          _test:
            providers:
              - _type: react/element
                name: react-redux.Provider
                props:
                  store:
                    _type: js/import
                    name: app-x/redux/store.default
              - _type: react/element
                name: "app-x/theme/GlobalStyleProvider.default"
                props:
                  theme:
                    _type: js/import
                    name: app-x/theme.default

    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /nav/uiNav
      ui_component_type: react/component
      ui_component_spec:
        navContext:
          _type: react/context
          name: app-x/builder/ui/NavProvider.Context
        effects:
          _type: react/effect
          body:
            - _type: appx/api
              namespace: sys
              app_name: appx
              method: get
              endpoint: /ui/ui_deployment
              init: ""
              result: |-
                console.log(result)
                states.setUiDeployments(result)
              error: ""
        snippet:
          _type: js/statement
          body:
            - console.log('navContext', navContext)
        styles:
          _type: mui/style
          divider:
            margin:
              _type: js/expression
              data: theme.spacing(3, 0, 2)
          root:
            backgroundColor:
              _type: js/expression
              data: theme.palette.background.paper
            width: 100%
        states:
          ...uiDeployments:
            _type: react/state
            name: uiDeployments
            setter: setUiDeployments
            init: "['a','b','c']"
          uiComponentNav:
            _type: react/state
            name: open
            setter: setOpen
            init: "false"
          uiRouteNav:
            _type: react/state
            name: open
            setter: setOpen
            init: "false"
        handlers:
          handleComponentSelected:
            _type: js/expression
            data: props.handleComponentSelected
          handleRouteSelected:
            _type: js/expression
            data: props.handleRouteSelected
          updateDeployment:
            _type: js/function
            params:
              - value
            body:
              - console.log('updateDeployment', value)
              - |
                const found = states.uiDeployments
                    .find(d => `${d.namespace}/${d.ui_name}/${d.ui_deployment}` === value)
                if (found) {
                    navContext.setNavDeployment(found)
                }
        element:
          _type: react/element
          name: "@material-ui/core.Box"
          props:
            className:
              _type: js/expression
              data: styles.root
          children:
            - _type: react/element
              name: "@material-ui/core.List"
              props:
                component: nav
                aria-labelledby: UI Builder
                className:
                  _type: js/expression
                  data: styles.root
              children:
                - _type: react/element
                  name: "@material-ui/core.ListSubheader"
                  children:
                    - UI Builder
                - _type: react/element
                  name: app-x/router.A
                  props:
                    href: /ui_settings
                  children:
                    - _type: react/element
                      name: "@material-ui/core.ListItem"
                      props:
                        dense: true
                        button: true
                      children:
                        - _type: react/element
                          name: "@material-ui/core.ListItemIcon"
                          children:
                            - _type: react/element
                              name: "@material-ui/icons.SettingsOutlined"
                              props:
                                fontSize: small
                        - _type: react/element
                          name: "@material-ui/core.ListItemText"
                          props:
                            primary: UI Apps
                - _type: react/element
                  name: app-x/router.A
                  props:
                    href: /ui_deployments
                  children:
                    - _type: react/element
                      name: "@material-ui/core.ListItem"
                      props:
                        dense: true
                        button: true
                      children:
                        - _type: react/element
                          name: "@material-ui/core.ListItemIcon"
                          children:
                            - _type: react/element
                              name: "@material-ui/icons.DeviceHubOutlined"
                              props:
                                fontSize: small
                        - _type: react/element
                          name: "@material-ui/core.ListItemText"
                          props:
                            variant: small
                            primary: UI Deployments
                - _type: react/element
                  name: "@material-ui/core.Divider"
                  props:
                    className:
                      _type: js/expression
                      data: styles.divider
                - _type: react/element
                  name: "@material-ui/core.ListItem"
                  props:
                    dense: true
                  children:
                    - _type: react/element
                      name: "@material-ui/core.FormControl"
                      props:
                        style:
                          width: 100%
                      children:
                        - _type: react/element
                          name: "@material-ui/core.FormHelperText"
                          children:
                            - Select Deployment
                        - _type: react/element
                          name: "@material-ui/core.Select"
                          props:
                            onChange:
                              _type: js/expression
                              data: "e => handlers.updateDeployment(e.target.value)"
                            value:
                              _type: js/expression
                              data: "\\`${navContext.navDeployment?.namespace}/${navContext.navDeployment?.ui_n\
                                ame}/${navContext.navDeployment?.ui_deployment}\\`"
                          children:
                            - _type: js/map
                              data:
                                _type: js/expression
                                data: states.uiDeployments
                              result:
                                _type: react/element
                                name: "@material-ui/core.MenuItem"
                                props:
                                  key:
                                    _type: js/expression
                                    data: "\\`${item.namespace}/${item.ui_name}/${item.ui_deployment}\\`"
                                  value:
                                    _type: js/expression
                                    data: "\\`${item.namespace}/${item.ui_name}/${item.ui_deployment}\\`"
                                children:
                                  - _type: react/element
                                    name: "@material-ui/core.ListItemText"
                                    children:
                                      - _type: js/expression
                                        data: "\\`[ ${item.namespace} / ${item.ui_name} / ${item.ui_deployment} ]\\`"
                - _type: react/element
                  name: "@material-ui/core.ListItem"
                  props:
                    dense: true
                    button: true
                    onClick:
                      _type: js/expression
                      data: |
                        () => {
                          states.uiComponentNav.setOpen(!states.uiComponentNav.open)
                        }
                  children:
                    - _type: react/element
                      name: "@material-ui/core.ListItemIcon"
                      children:
                        - _type: react/element
                          name: "@material-ui/icons.WidgetsOutlined"
                          props:
                            fontSize: small
                    - _type: react/element
                      name: "@material-ui/core.ListItemText"
                      props:
                        primary: UI Components
                    - _type: js/switch
                      children:
                        - condition: "!!states.uiComponentNav.open"
                          result:
                            _type: react/element
                            name: "@material-ui/icons.ExpandLess"
                            props:
                              fontSize: small
                        - condition: "!states.uiComponentNav.open"
                          result:
                            _type: react/element
                            name: "@material-ui/icons.ExpandMore"
                            props:
                              fontSize: small
                - _type: react/element
                  name: "@material-ui/core.Collapse"
                  props:
                    in:
                      _type: js/expression
                      data: |
                        states.uiComponentNav.open
                    unmountOnExit: true
                  children:
                    - _type: react/element
                      name: "@material-ui/core.Box"
                      children:
                        - _type: react/element
                          name: app-x/builder/ui/component/ComponentProvider
                          children:
                            - _type: react/element
                              name: app-x/builder/ui/component/ComponentTree
                              props:
                                namespace: sys
                                ui_name: ui
                                ui_deployment: base
                - _type: react/element
                  name: "@material-ui/core.ListItem"
                  props:
                    dense: true
                    button: true
                    onClick:
                      _type: js/expression
                      data: |
                        () => {
                          states.uiRouteNav.setOpen(!states.uiRouteNav.open)
                        }
                  children:
                    - _type: react/element
                      name: "@material-ui/core.ListItemIcon"
                      children:
                        - _type: react/element
                          name: "@material-ui/icons.SwapCallsOutlined"
                          props:
                            fontSize: small
                    - _type: react/element
                      name: "@material-ui/core.ListItemText"
                      props:
                        primary: UI Routes
                    - _type: js/switch
                      children:
                        - condition: "!!states.uiRouteNav.open"
                          result:
                            _type: react/element
                            name: "@material-ui/icons.ExpandLess"
                            props:
                              fontSize: small
                        - condition: "!states.uiRouteNav.open"
                          result:
                            _type: react/element
                            name: "@material-ui/icons.ExpandMore"
                            props:
                              fontSize: small
                - _type: react/element
                  name: "@material-ui/core.Collapse"
                  props:
                    in:
                      _type: js/expression
                      data: |
                        states.uiRouteNav.open
                    unmountOnExit: true
                  children:
                    - _type: react/element
                      name: "@material-ui/core.Box"
                      children:
                        - _type: react/element
                          name: app-x/builder/ui/route/RouteProvider
                          children:
                            - _type: react/element
                              name: app-x/builder/ui/route/RouteTree
                              props:
                                namespace: sys
                                ui_name: ui
                                ui_deployment: base
        _test:
          providers:
            - _type: react/element
              name: react-redux.Provider
              props:
                store:
                  _type: js/import
                  name: app-x/redux/store.default
            - _type: react/element
              name: app-x/theme/GlobalStyleProvider.default
              props:
                theme:
                  _type: js/import
                  name: app-x/theme.default
            - _type: react/element
              name: app-x/builder/ui/NavProvider.default


    ############################################################
    - namespace: sys
      ui_name: ui
      ui_ver: internal
      ui_component_name: /GridLayoutTest
      ui_component_type: react/component
      ui_component_spec:
        f:
          _type: js/function
          params:
            - a
            - b
          body:
            - a+1
        layouts:
          lg:
            - h: 10
              i: a
              w: 4
              x: 0
              y: 0
            - h: 8
              i: b
              w: 5
              x: 4
              y: 0
            - h: 3
              i: c
              w: 4
              x: 4
              y: 0
          md:
            - h: 10
              i: a
              w: 4
              x: 0
              y: 0
            - h: 8
              i: b
              w: 5
              x: 4
              y: 0
            - h: 4
              i: c
              w: 4
              x: 4
              y: 0
        styles:
          _type: mui/style
          box:
            borderColor:
              _type: js/expression
              data: theme.palette.divider
            borderStyle: solid
          formControl:
            padding:
              _type: js/expression
              data: theme.spacing(2,0)
            width: 100%
          innerBox:
            backgroundColor:
              _type: js/expression
              data: theme.palette.background.paper
            margin:
              _type: js/expression
              data: theme.spacing(2,0)
            padding:
              _type: js/expression
              data: theme.spacing(2,2)
          root:
            height: 100%
            width: 100%
        snippet:
          _type: js/statement
          body:
            - _type: appx/api
              namespace: sys
              app_name: appx
              method: get
              endpoint: /namespace
              init: ""
              result: console.log(result)
              error: |-
                $I('antd.notification').error({
                    message: 'API failed',
                    description: error,
                    placement: "bottomLeft"
                })
            - _type: js/statement
              body:
                - console.log(this)
        element:
          _type: react/element
          name: "@material-ui/core.Container"
          props:
            className:
              _type: js/expression
              data: styles.root
          children:
            - _type: react/element
              name: react-grid-layout.Responsive
              props:
                breakpoints:
                  lg: 1200
                  md: 0
                className:
                  _type: js/expression
                  data: styles.root
                cols:
                  lg: 12
                  md: 12
                layouts:
                  _type: js/expression
                  data: layouts
                rowHeight: 30
                width: 800
              children:
                - _type: react/element
                  name: "@material-ui/core.Box"
                  props:
                    className:
                      _type: js/expression
                      data: styles.box
                    key: a
                  children:
                    - _type: react/element
                      name: "@material-ui/core.Box"
                      props:
                        className:
                          _type: js/expression
                          data: styles.innerBox
                        onClick:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onDrag:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onMouseDown:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onMouseUp:
                          _type: js/expression
                          data: e => e.stopPropagation()
                      children:
                        - _type: react/form
                          name: a
                          onSubmit: console.log(data)
                          onError: ""
                          props:
                            classname:
                              _type: js/expression
                              data: styles.root
                          formProps:
                            mode: onChange
                            revalidateMode: onChange
                          children:
                            - _type: input/text
                              name: text
                              required: true
                              array: false
                              props:
                                autoSuggest: true
                                className:
                                  _type: js/expression
                                  data: styles.formControl
                                label: A Label
                                options:
                                  _type: js/expression
                                  data: "[{value:'a'},{value:'abc'},{value:'def'}]"
                            - _type: input/select
                              name: select
                              required: true
                              props:
                                className:
                                  _type: js/expression
                                  data: styles.formControl
                                defaultValue: abc
                                label: Select Label
                                options:
                                  _type: js/expression
                                  data: '[{value:"abc"},{value:"def"}]'
                            - _type: input/text
                              name: text2
                              required: true
                              props:
                                autoSuggest: false
                                className:
                                  _type: js/expression
                                  data: styles.formControl
                                label: "Text #2"
                                options:
                                  _type: js/expression
                                  data: '[{value:"a"},{value:"b"}]'
                              rules:
                                _type: input/rule
                                data: []
                    - a
                - _type: react/element
                  name: "@material-ui/core.Box"
                  props:
                    className:
                      _type: js/expression
                      data: styles.box
                    key: b
                  children:
                    - _type: react/element
                      name: "@material-ui/core.Box"
                      props:
                        className:
                          _type: js/expression
                          data: styles.innerBox
                        onClick:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onDrag:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onMouseDown:
                          _type: js/expression
                          data: e => e.stopPropagation()
                        onMouseUp:
                          _type: js/expression
                          data: e => e.stopPropagation()
                      children:
                        - _type: react/form
                          name: b
                          onSubmit: console.log(data)
                          onError: ""
                          formProps:
                            mode: onChange
                          children:
                            - _type: input/text
                              name: text
                              required: true
                              array: true
                              props:
                                autoSuggest: true
                                callback:
                                  _type: js/expression
                                  data: "(data) => {console.log(\\`callback data: ${data}\\`)}"
                                className:
                                  _type: js/expression
                                  data: styles.formControl
                                defaultValue:
                                  _type: js/expression
                                  data: "[{value:'a'},{value:'b'}]"
                                label: Text Label
                                multiline: false
                                size: small
                                options:
                                  _type: js/expression
                                  data: "[{value:'abc'},{value:'def'},{value:'k'},{value:'cat'}]"
                            - _type: input/switch
                              name: switch
                              required: true
                              props:
                                className:
                                  _type: js/expression
                                  data: styles.formControl
                                label: Switch Label
                                size: small
                    - b
                - _type: react/element
                  name: "@material-ui/core.Box"
                  props:
                    className:
                      _type: js/expression
                      data: styles.box
                    key: c
                  children:
                    - c
        _test:
          providers:
            - _type: react/element
              name: react-redux.Provider
              props:
                store:
                  _type: js/import
                  name: app-x/redux/store.default
            - _type: react/element
              name: app-x/theme/GlobalStyleProvider
              props:
                theme:
                  _type: js/import
                  name: app-x/theme.default
