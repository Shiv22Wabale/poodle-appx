######################################################################
# global
global:
    version: "r001.p01"
    schema_prefix: "{{{MYSQL_CONF.schema_prefix}}}"
    schema_separator: "{{{MYSQL_CONF.schema_separator}}}"

######################################################################
# metadata
_appx_meta:
    - meta_name: "appx.version"
      meta_key: "{{{global.version}}}"
      meta_info:
          comment: "initialize"
    - meta_name: "appx.schema"
      meta_key: "prefix"
      meta_info:
          value: "{{{MYSQL_CONF.schema_prefix}}}"
          comment: "initialize"
    - meta_name: "appx.schema"
      meta_key: "separator"
      meta_info:
          value: "{{{MYSQL_CONF.schema_separator}}}"
          comment: "initialize"

######################################################################
# metadata
_user:
    - namespace: "sys"
      scope_name: "local"
      username: "{{{MYSQL_CONF.appx_node_user}}}"
      password: 'PASSWORD("{{{MYSQL_CONF.appx_node_pass}}}")'
      user_info:
          comment: "initialize admin user: {{{MYSQL_CONF.appx_node_user}}}"

######################################################################
# _role_scope
_role_scope:
    - namespace: "sys"
      scope_name: "appx.local_auth"
      scope_spec:
          comment: "initialize"

# _role_grant
_role_grant:
    - namespace: "sys"
      role_name: "appx.superadmin"
      grant_scope: "appx.local_auth"
      grant_name: "{{{MYSQL_CONF.appx_node_user}}}"
      grant_spec:
          comment: "initialize"

# _perm_func
_perm_func:
    - namespace: "sys"
      role_name: "appx.superadmin"
      func_scope: "appx"
      func_name: "read"
      func_spec:
          comment: "initialize"
    - namespace: "sys"
      role_name: "appx.superadmin"
      func_scope: "appx"
      func_name: "write"
      func_spec:
          comment: "initialize"
    - namespace: "sys"
      role_name: "appx.superadmin"
      func_scope: "appx"
      func_name: "status"
      func_spec:
          comment: "initialize"

######################################################################
# namespace
namespace:
    - namespace: "sys"
      owner_scope: "local"
      owner_name: "{{{MYSQL_CONF.appx_node_user}}}"
      namespace_spec:
          comment: "initialize"

######################################################################
# runtime
runtime:
    - namespace: "sys"
      runtime_name: "base"
      runtime_spec:
          comment: "initialize"

######################################################################
# application
app:
    - namespace: "sys"
      app_name: "appx"
      app_ver: "internal"
      app_spec:
          comment: "initialize"

######################################################################
# deployment
deployment:
    - namespace: "sys"
      runtime_name: "base"
      app_name: "appx"
      app_ver: "internal"
      deployment_spec:
          comment: "initialize"
